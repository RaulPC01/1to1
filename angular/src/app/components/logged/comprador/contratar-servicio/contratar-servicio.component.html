<div class="encabezado">
    <h2 class="titulo"> {{ 'contratar-servicio.titulo' | translate }}</h2>
    <p class="descripcion"> {{ 'contratar-servicio.descripcion2' | translate }}</p>
</div>

<div class="cuerpo">

    <div *ngIf="showConfirmation" class="popup">
        {{ 'contratar-servicio.confirmacion' | translate }}
    </div>
    <div class="izquierda">
        <h3 class="tituloIzquierda"><span class="material-symbols-outlined">family_star</span>  {{ 'contratar-servicio.aSaber' | translate }}</h3>
        <div [ngClass]="{ 'hidden': !mostrarDescripcion }">
            <p> {{ 'contratar-servicio.descripcion' | translate }}</p>
        </div>

        <div [ngClass]="{ 'hidden': !mostrarDate }">
            <p>{{ 'contratar-servicio.fecha' | translate }}</p><br>
        </div>


        <div [ngClass]="{ 'hidden': !mostrarMetodoPago }">
            <p>{{ 'contratar-servicio.pago' | translate }}</p><br>
        </div>
    </div>

    <div class="derecha">
        <form [formGroup]="servicioForm" (ngSubmit)="submitForm()">
            <!----------------------------DESCRIPCION DEL SERVICIO------------------------------------->
            <div [ngClass]="{ 'hidden': !mostrarDescripcion }" class="mb-4">
                <div class="mb-3">
                    <h3 class="tituloDescripcion">{{ 'contratar-servicio.describe' | translate }} <span style="color: #b40301">{{ 'contratar-servicio.tuProblema' | translate }}</span></h3>
                    <textarea type="text" formControlName="descripcion" class="textareaDescripcion" placeholder="{{ 'contratar-servicio.ejemplo' | translate}}" required (input)="countDescripcionLength($event)"></textarea>
                    <div class="contador-letras">{{ descripcionLength }}/200</div> <!-- Contador de letras -->
                    <div class="contenedor-botones">
                       <button type="button" (click)="anteriorDescripcion()">{{ 'contratar-servicio.anterior' | translate }}</button>
                       <button type="button" class="bSiguiente" (click)="verDate()" [disabled]="!servicioForm.get('descripcion')?.valid">{{ 'contratar-servicio.siguiente' | translate }}</button>
                    </div>
                </div>
            </div>

            <!-------------------------------------Fecha de realización-------------------------------------------->
            <div [ngClass]="{ 'hidden': !mostrarDate }" class="mb-4">
                <div class="mb-3">
                    <h3 class="tituloDescripcion"><span style="color: #b40301">{{ 'contratar-servicio.fecha1' | translate }}</span> {{ 'contratar-servicio.fecha2' | translate }}</h3>
                    <input type="date" formControlName="date_servicio" [min]="minDate" [max]="maxDate" required>
                    <div *ngIf="servicioForm.controls['date_servicio'].errors?.['dateRange']" class="alert alert-danger">
                        {{ 'contratar-servicio.errorFecha' | translate }}
                    </div>
                </div>
            
                <div class="contenedor-botones">
                    <button type="button" (click)="anteriorDescripcion()">{{ 'contratar-servicio.anterior' | translate }}</button>
                    <button type="button" (click)="verMetodoPago()" [disabled]="!servicioForm.get('date_servicio')?.valid">{{ 'contratar-servicio.siguiente' | translate }}</button>
                </div>
            </div>
            
             <!-------------------------------------Metodo de Pago-------------------------------------------->
            <div id="metodoPago" [ngClass]="{ 'hidden': !mostrarMetodoPago }" class="mb-4">
                <h3 class="tituloDescripcion">{{ 'contratar-servicio.realizarPago' | translate }}</h3>
                <div class="credit-card-div">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-12">
                                <!-- -->
                                    <input type="password" formControlName="numero_tarjeta" class="form-control" placeholder="{{ 'contratar-servicio.introducirTarjeta' | translate }}" />
                                    <div *ngIf="servicioForm.controls['numero_tarjeta'].invalid && (servicioForm.controls['numero_tarjeta'].dirty || servicioForm.controls['numero_tarjeta'].touched)" class="alert alert-danger">
                                        Este campo no puede estar vacio.
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <span class="help-block text-muted small-font">{{ 'contratar-servicio.mesExpiracion' | translate }}</span>
                                     <!-- -->
                                    <input type="text" formControlName="mes_caducidad" class="form-control" placeholder="MM" />
                                    <div *ngIf="servicioForm.controls['mes_caducidad'].invalid && (servicioForm.controls['mes_caducidad'].dirty || servicioForm.controls['mes_caducidad'].touched)" class="alert alert-danger">
                                        Este campo no puede estar vacio.
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <span class="help-block text-muted small-font">{{ 'contratar-servicio.añoExpiracion' | translate }}</span>
                                     <!-- -->
                                    <input type="text" formControlName="anyo_caducidad" class="form-control" placeholder="AA" />
                                    <div *ngIf="servicioForm.controls['anyo_caducidad'].invalid && (servicioForm.controls['anyo_caducidad'].dirty || servicioForm.controls['anyo_caducidad'].touched)" class="alert alert-danger">
                                        Este campo no puede estar vacio.
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3" style="display: flex; flex-direction: column;">
                                    <span class="help-block text-muted small-font">CCV</span>
                                     <!-- -->
                                    <input type="password" formControlName="CVV" class="form-control" placeholder="CCV" />
                                    <div *ngIf="servicioForm.controls['CVV'].invalid && (servicioForm.controls['CVV'].dirty || servicioForm.controls['CVV'].touched)" class="alert alert-danger">
                                        Este campo no puede estar vacio.
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <img src="../../../../../assets/imatges/Visa_Logo.png" class="img-rounded" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 pad-adjust">
                                     <!-- -->
                                    <input type="text" formControlName="nombre_tarjeta" class="form-control" placeholder="{{ 'contratar-servicio.nombreTarjeta' | translate }}" />
                                    <div *ngIf="servicioForm.controls['nombre_tarjeta'].invalid && (servicioForm.controls['nombre_tarjeta'].dirty || servicioForm.controls['nombre_tarjeta'].touched)" class="alert alert-danger">
                                        Este campo no puede estar vacio.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    
    
                <div class="contenedor-botones">
                    <button type="button" (click)="anteriorDate()">{{ 'contratar-servicio.anterior' | translate}}</button>
                    <button type="submit" [disabled]="!servicioForm.valid">{{ 'contratar-servicio.enviarSolicitud' | translate }}</button>
                </div>
            </div>
        </form>
    </div> 
</div>
