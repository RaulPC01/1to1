<div class="main">
  <div class="loading-spinner" *ngIf="loading">
    <!-- Implementa tu spinner aquí -->
    <div class="spinner"></div>
  </div>

  <div class="content-container" *ngIf="!loading">
    <div class="left-content">
      <div class="col-md-6">
        <h2 class="tituloCrearServicio">{{ 'mis-servicios.create' | translate }}</h2>
        <p class="texto">{{ 'mis-servicios.description' | translate }}</p>


        <a routerLink="/crear-servicio" class="btn btn-primary">Crear</a>

      </div>
    </div>

    <div class="right-content" *ngIf="!loading">
      <h2>{{ 'mis-servicios.titulo' | translate }}</h2>
      <hr class="hr" />
      <div *ngIf="servicios.length > 0" class="servicios-container">
        <div *ngFor="let servicio of servicios" class="servicio-card">
          <h3>{{ servicio.tipo_servicio }}</h3>
          <p>{{ servicio.descripcion }}</p>
          <p>{{ servicio.tarifa }}€</p>
          <div class="buttons">
            <a [routerLink]="['/servicios', servicio.id_servicios]" class="button view-button"><i
                class="fas fa-info-circle"></i>{{ 'mis-servicios.ver_mas' | translate }}</a>
            <button (click)="toggleEditForm(servicio)" class="button edit-button"><i class="fas fa-edit"></i>
              {{ 'mis-servicios.editar' | translate }}</button>
            <button (click)="eliminarServicio(servicio.id_servicios)" class="button delete-button"><i
                class="fas fa-trash-alt"></i>{{ 'mis-servicios.borraR' | translate }}</button>
          </div>
          <!-- Formulario de edición del servicio actual -->
          <div *ngIf="servicioEditando && servicioEditando.id_servicios === servicio.id_servicios" class="edit-form">
            <form (ngSubmit)="actualizarServicio()" class="edit-form-inner">
              <h4>{{ 'mis-servicios.editar_servicio' | translate }}</h4>
              <div class="form-group">
                <label for="tipo">{{ 'mis-servicios.tipo_servicio' | translate }}</label>
                <input type="text" [(ngModel)]="servicioEditando.tipo_servicio" id="tipo" name="tipo"
                  class="form-control">
              </div>
              <div class="form-group">
                <label for="descripcion">{{ 'mis-servicios.descripcion' | translate }}</label>
                <textarea [(ngModel)]="servicioEditando.descripcion" id="descripcion" name="descripcion"
                  class="form-control"></textarea>
              </div>
              <div class="form-group">
                <label for="tarifa">{{ 'mis-servicios.tarifa' | translate }}</label>
                <input type="number" [(ngModel)]="servicioEditando.tarifa" id="tarifa" name="tarifa"
                  class="form-control">
              </div>
              <button type="submit" class="btn btn-primary">{{ 'mis-servicios.actualizar_servicio' | translate }}</button>
              <button type="button" class="btn btn-secondary" (click)="toggleEditForm(servicio)">{{ 'mis-servicios.cancelar' | translate }}</button>
            </form>
          </div>
        </div>
      </div>
      <ng-template #noServicios>
        <p>No se encontraron servicios.</p>
      </ng-template>
    </div>
  </div>
</div>